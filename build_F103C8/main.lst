ARM GAS  C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Core/Src/main.c"
  18              		.section	.text.delay,"ax",%progbits
  19              		.align	1
  20              		.global	delay
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	delay:
  26              	.LVL0:
  27              	.LFB0:
   1:Core/Src/main.c **** #include "init.h"
   2:Core/Src/main.c **** 
   3:Core/Src/main.c **** void delay(uint32_t count) {
  28              		.loc 1 3 28 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              		.loc 1 3 28 is_stmt 0 view .LVU1
  34 0000 82B0     		sub	sp, sp, #8
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
   4:Core/Src/main.c ****     for(volatile uint32_t i = 0; i < count; i++);
  37              		.loc 1 4 5 is_stmt 1 view .LVU2
  38              	.LBB2:
  39              		.loc 1 4 9 view .LVU3
  40              		.loc 1 4 27 is_stmt 0 view .LVU4
  41 0002 0023     		movs	r3, #0
  42 0004 0193     		str	r3, [sp, #4]
  43              		.loc 1 4 5 view .LVU5
  44 0006 02E0     		b	.L2
  45              	.L3:
  46              		.loc 1 4 46 is_stmt 1 discriminator 3 view .LVU6
  47 0008 019B     		ldr	r3, [sp, #4]
  48 000a 0133     		adds	r3, r3, #1
  49 000c 0193     		str	r3, [sp, #4]
  50              	.L2:
  51              		.loc 1 4 36 discriminator 1 view .LVU7
  52 000e 019B     		ldr	r3, [sp, #4]
  53 0010 8342     		cmp	r3, r0
  54 0012 F9D3     		bcc	.L3
ARM GAS  C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s 			page 2


  55              	.LBE2:
   5:Core/Src/main.c **** }
  56              		.loc 1 5 1 is_stmt 0 view .LVU8
  57 0014 02B0     		add	sp, sp, #8
  58              	.LCFI1:
  59              		.cfi_def_cfa_offset 0
  60              		@ sp needed
  61 0016 7047     		bx	lr
  62              		.cfi_endproc
  63              	.LFE0:
  65              		.section	.text.main,"ax",%progbits
  66              		.align	1
  67              		.global	main
  68              		.syntax unified
  69              		.thumb
  70              		.thumb_func
  72              	main:
  73              	.LFB1:
   6:Core/Src/main.c **** 
   7:Core/Src/main.c **** int main(void) {
  74              		.loc 1 7 16 is_stmt 1 view -0
  75              		.cfi_startproc
  76              		@ args = 0, pretend = 0, frame = 0
  77              		@ frame_needed = 0, uses_anonymous_args = 0
  78 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
  79              	.LCFI2:
  80              		.cfi_def_cfa_offset 32
  81              		.cfi_offset 3, -32
  82              		.cfi_offset 4, -28
  83              		.cfi_offset 5, -24
  84              		.cfi_offset 6, -20
  85              		.cfi_offset 7, -16
  86              		.cfi_offset 8, -12
  87              		.cfi_offset 9, -8
  88              		.cfi_offset 14, -4
   8:Core/Src/main.c ****     // ИНИЦИАЛИЗАЦИЯ ПЕРИФЕРИИ
   9:Core/Src/main.c ****     Init_RCC();
  89              		.loc 1 9 5 view .LVU10
  90 0004 FFF7FEFF 		bl	Init_RCC
  91              	.LVL1:
  10:Core/Src/main.c ****     Init_GPIO();
  92              		.loc 1 10 5 view .LVU11
  93 0008 FFF7FEFF 		bl	Init_GPIO
  94              	.LVL2:
  11:Core/Src/main.c ****     
  12:Core/Src/main.c ****     uint8_t sequence_step = 0;
  95              		.loc 1 12 5 view .LVU12
  13:Core/Src/main.c ****     uint8_t port_mode = 0; // 0=кнопка, 1=светодиод
  96              		.loc 1 13 5 view .LVU13
  14:Core/Src/main.c ****     uint8_t last_btn1 = 1;
  97              		.loc 1 14 5 view .LVU14
  15:Core/Src/main.c ****     uint8_t last_btn2 = 1;
  98              		.loc 1 15 5 view .LVU15
  16:Core/Src/main.c ****     
  17:Core/Src/main.c ****     // Начальное состояние
  18:Core/Src/main.c ****     GPIOA->BSRR = 0xF0 << 16; // Все светодиоды PA выкл
  99              		.loc 1 18 5 view .LVU16
ARM GAS  C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s 			page 3


 100              		.loc 1 18 17 is_stmt 0 view .LVU17
 101 000c 334B     		ldr	r3, .L16
 102 000e 4FF47002 		mov	r2, #15728640
 103 0012 1A61     		str	r2, [r3, #16]
  19:Core/Src/main.c ****     GPIOC->BSRR = (1 << 14); // PC14 в 1 (светодиод выкл)
 104              		.loc 1 19 5 is_stmt 1 view .LVU18
 105              		.loc 1 19 17 is_stmt 0 view .LVU19
 106 0014 03F50063 		add	r3, r3, #2048
 107 0018 4FF48042 		mov	r2, #16384
 108 001c 1A61     		str	r2, [r3, #16]
  15:Core/Src/main.c ****     uint8_t last_btn2 = 1;
 109              		.loc 1 15 13 view .LVU20
 110 001e 0121     		movs	r1, #1
  14:Core/Src/main.c ****     uint8_t last_btn2 = 1;
 111              		.loc 1 14 13 view .LVU21
 112 0020 0E46     		mov	r6, r1
  13:Core/Src/main.c ****     uint8_t last_btn1 = 1;
 113              		.loc 1 13 13 view .LVU22
 114 0022 0027     		movs	r7, #0
  12:Core/Src/main.c ****     uint8_t port_mode = 0; // 0=кнопка, 1=светодиод
 115              		.loc 1 12 13 view .LVU23
 116 0024 3D46     		mov	r5, r7
 117 0026 18E0     		b	.L13
 118              	.LVL3:
 119              	.L8:
 120              	.LBB3:
  20:Core/Src/main.c ****     
  21:Core/Src/main.c ****     while(1) {
  22:Core/Src/main.c ****         uint8_t btn1 = !(GPIOC->IDR & (1 << 14));
  23:Core/Src/main.c ****         uint8_t btn2 = !(GPIOC->IDR & (1 << 13));
  24:Core/Src/main.c ****         
  25:Core/Src/main.c ****         // Кнопка 2: последовательность
  26:Core/Src/main.c ****         if (btn2 && !last_btn2) {
  27:Core/Src/main.c ****             sequence_step = (sequence_step + 1) % 5;
  28:Core/Src/main.c ****             
  29:Core/Src/main.c ****             GPIOA->BSRR = 0xF0 << 16; // Выкл PA4-PA7
  30:Core/Src/main.c ****             
  31:Core/Src/main.c ****             if (sequence_step >= 1) GPIOA->BSRR = (1 << 4);
  32:Core/Src/main.c ****             if (sequence_step >= 2) GPIOA->BSRR = (1 << 5);
  33:Core/Src/main.c ****             if (sequence_step >= 3) GPIOA->BSRR = (1 << 6); 
  34:Core/Src/main.c ****             if (sequence_step >= 4) GPIOA->BSRR = (1 << 7);
  35:Core/Src/main.c ****             
  36:Core/Src/main.c ****             if (port_mode == 1) {
 121              		.loc 1 36 13 is_stmt 1 view .LVU24
 122              		.loc 1 36 16 is_stmt 0 view .LVU25
 123 0028 002F     		cmp	r7, #0
 124 002a 4DD1     		bne	.L15
 125              	.L9:
  37:Core/Src/main.c ****                 GPIOC->BSRR = (1 << (14+16));
  38:Core/Src/main.c ****             }
  39:Core/Src/main.c ****             
  40:Core/Src/main.c ****             delay(200000);
 126              		.loc 1 40 13 is_stmt 1 view .LVU26
 127 002c 2C48     		ldr	r0, .L16+4
 128 002e FFF7FEFF 		bl	delay
 129              	.LVL4:
 130              	.L6:
ARM GAS  C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s 			page 4


  41:Core/Src/main.c ****         }
  42:Core/Src/main.c ****         
  43:Core/Src/main.c ****         // Кнопка 1: смена режима
  44:Core/Src/main.c ****         if (btn1 && !last_btn1) {
 131              		.loc 1 44 9 view .LVU27
 132              		.loc 1 44 12 is_stmt 0 view .LVU28
 133 0032 64B9     		cbnz	r4, .L10
 134              		.loc 1 44 18 discriminator 1 view .LVU29
 135 0034 5EB9     		cbnz	r6, .L10
  45:Core/Src/main.c ****             port_mode = !port_mode;
 136              		.loc 1 45 13 is_stmt 1 view .LVU30
 137              		.loc 1 45 25 is_stmt 0 view .LVU31
 138 0036 87F00104 		eor	r4, r7, #1
 139              	.LVL5:
  46:Core/Src/main.c ****             
  47:Core/Src/main.c ****             if (port_mode) {
 140              		.loc 1 47 13 is_stmt 1 view .LVU32
 141              		.loc 1 47 16 is_stmt 0 view .LVU33
 142 003a 002F     		cmp	r7, #0
 143 003c 49D1     		bne	.L11
  48:Core/Src/main.c ****                 GPIOC->BSRR = (1 << (14+16));
 144              		.loc 1 48 17 is_stmt 1 view .LVU34
 145              		.loc 1 48 29 is_stmt 0 view .LVU35
 146 003e 294B     		ldr	r3, .L16+8
 147 0040 4FF08042 		mov	r2, #1073741824
 148 0044 1A61     		str	r2, [r3, #16]
 149              	.L12:
  49:Core/Src/main.c ****             } else {
  50:Core/Src/main.c ****                 GPIOC->BSRR = (1 << 14);
  51:Core/Src/main.c ****             }
  52:Core/Src/main.c ****             
  53:Core/Src/main.c ****             delay(200000);
 150              		.loc 1 53 13 is_stmt 1 view .LVU36
 151 0046 2648     		ldr	r0, .L16+4
 152 0048 FFF7FEFF 		bl	delay
 153              	.LVL6:
  45:Core/Src/main.c ****             
 154              		.loc 1 45 23 is_stmt 0 view .LVU37
 155 004c 2746     		mov	r7, r4
 156              	.LVL7:
 157              	.L10:
  54:Core/Src/main.c ****         }
  55:Core/Src/main.c ****         
  56:Core/Src/main.c ****         last_btn1 = btn1;
 158              		.loc 1 56 9 is_stmt 1 view .LVU38
  57:Core/Src/main.c ****         last_btn2 = btn2;
 159              		.loc 1 57 9 view .LVU39
  58:Core/Src/main.c ****         delay(10000);
 160              		.loc 1 58 9 view .LVU40
 161 004e 42F21070 		movw	r0, #10000
 162 0052 FFF7FEFF 		bl	delay
 163              	.LVL8:
 164              	.LBE3:
  21:Core/Src/main.c ****         uint8_t btn1 = !(GPIOC->IDR & (1 << 14));
 165              		.loc 1 21 10 view .LVU41
 166              	.LBB4:
  57:Core/Src/main.c ****         last_btn2 = btn2;
ARM GAS  C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s 			page 5


 167              		.loc 1 57 19 is_stmt 0 view .LVU42
 168 0056 4946     		mov	r1, r9
  56:Core/Src/main.c ****         last_btn2 = btn2;
 169              		.loc 1 56 19 view .LVU43
 170 0058 4646     		mov	r6, r8
 171              	.LVL9:
 172              	.L13:
  56:Core/Src/main.c ****         last_btn2 = btn2;
 173              		.loc 1 56 19 view .LVU44
 174              	.LBE4:
  21:Core/Src/main.c ****         uint8_t btn1 = !(GPIOC->IDR & (1 << 14));
 175              		.loc 1 21 5 is_stmt 1 view .LVU45
 176              	.LBB5:
  22:Core/Src/main.c ****         uint8_t btn2 = !(GPIOC->IDR & (1 << 13));
 177              		.loc 1 22 9 view .LVU46
  22:Core/Src/main.c ****         uint8_t btn2 = !(GPIOC->IDR & (1 << 13));
 178              		.loc 1 22 31 is_stmt 0 view .LVU47
 179 005a 224B     		ldr	r3, .L16+8
 180 005c 9C68     		ldr	r4, [r3, #8]
  22:Core/Src/main.c ****         uint8_t btn2 = !(GPIOC->IDR & (1 << 13));
 181              		.loc 1 22 24 view .LVU48
 182 005e 14F48044 		ands	r4, r4, #16384
 183 0062 0CBF     		ite	eq
 184 0064 4FF00108 		moveq	r8, #1
 185 0068 4FF00008 		movne	r8, #0
 186              	.LVL10:
  23:Core/Src/main.c ****         
 187              		.loc 1 23 9 is_stmt 1 view .LVU49
  23:Core/Src/main.c ****         
 188              		.loc 1 23 31 is_stmt 0 view .LVU50
 189 006c 9B68     		ldr	r3, [r3, #8]
  23:Core/Src/main.c ****         
 190              		.loc 1 23 37 view .LVU51
 191 006e 03F40053 		and	r3, r3, #8192
  23:Core/Src/main.c ****         
 192              		.loc 1 23 24 view .LVU52
 193 0072 002B     		cmp	r3, #0
 194 0074 0CBF     		ite	eq
 195 0076 4FF00109 		moveq	r9, #1
 196 007a 4FF00009 		movne	r9, #0
 197              	.LVL11:
  26:Core/Src/main.c ****             sequence_step = (sequence_step + 1) % 5;
 198              		.loc 1 26 9 is_stmt 1 view .LVU53
  26:Core/Src/main.c ****             sequence_step = (sequence_step + 1) % 5;
 199              		.loc 1 26 12 is_stmt 0 view .LVU54
 200 007e D8D1     		bne	.L6
  26:Core/Src/main.c ****             sequence_step = (sequence_step + 1) % 5;
 201              		.loc 1 26 18 discriminator 1 view .LVU55
 202 0080 0029     		cmp	r1, #0
 203 0082 D6D1     		bne	.L6
  27:Core/Src/main.c ****             
 204              		.loc 1 27 13 is_stmt 1 view .LVU56
  27:Core/Src/main.c ****             
 205              		.loc 1 27 44 is_stmt 0 view .LVU57
 206 0084 0135     		adds	r5, r5, #1
 207              	.LVL12:
  27:Core/Src/main.c ****             
ARM GAS  C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s 			page 6


 208              		.loc 1 27 49 view .LVU58
 209 0086 184A     		ldr	r2, .L16+12
 210 0088 82FB0532 		smull	r3, r2, r2, r5
 211 008c EB17     		asrs	r3, r5, #31
 212 008e C3EB6203 		rsb	r3, r3, r2, asr #1
 213 0092 03EB8303 		add	r3, r3, r3, lsl #2
 214 0096 EB1A     		subs	r3, r5, r3
 215              	.LVL13:
  29:Core/Src/main.c ****             
 216              		.loc 1 29 13 is_stmt 1 view .LVU59
  29:Core/Src/main.c ****             
 217              		.loc 1 29 25 is_stmt 0 view .LVU60
 218 0098 104A     		ldr	r2, .L16
 219 009a 4FF47001 		mov	r1, #15728640
 220              	.LVL14:
  29:Core/Src/main.c ****             
 221              		.loc 1 29 25 view .LVU61
 222 009e 1161     		str	r1, [r2, #16]
  31:Core/Src/main.c ****             if (sequence_step >= 2) GPIOA->BSRR = (1 << 5);
 223              		.loc 1 31 13 is_stmt 1 view .LVU62
  31:Core/Src/main.c ****             if (sequence_step >= 2) GPIOA->BSRR = (1 << 5);
 224              		.loc 1 31 16 is_stmt 0 view .LVU63
 225 00a0 13F0FF05 		ands	r5, r3, #255
 226 00a4 06D0     		beq	.L7
  31:Core/Src/main.c ****             if (sequence_step >= 2) GPIOA->BSRR = (1 << 5);
 227              		.loc 1 31 37 is_stmt 1 discriminator 1 view .LVU64
  31:Core/Src/main.c ****             if (sequence_step >= 2) GPIOA->BSRR = (1 << 5);
 228              		.loc 1 31 49 is_stmt 0 discriminator 1 view .LVU65
 229 00a6 1346     		mov	r3, r2
 230              	.LVL15:
  31:Core/Src/main.c ****             if (sequence_step >= 2) GPIOA->BSRR = (1 << 5);
 231              		.loc 1 31 49 discriminator 1 view .LVU66
 232 00a8 1022     		movs	r2, #16
 233 00aa 1A61     		str	r2, [r3, #16]
  32:Core/Src/main.c ****             if (sequence_step >= 3) GPIOA->BSRR = (1 << 6); 
 234              		.loc 1 32 13 is_stmt 1 view .LVU67
  32:Core/Src/main.c ****             if (sequence_step >= 3) GPIOA->BSRR = (1 << 6); 
 235              		.loc 1 32 16 is_stmt 0 view .LVU68
 236 00ac 012D     		cmp	r5, #1
 237 00ae BBD9     		bls	.L8
  32:Core/Src/main.c ****             if (sequence_step >= 3) GPIOA->BSRR = (1 << 6); 
 238              		.loc 1 32 37 is_stmt 1 discriminator 1 view .LVU69
  32:Core/Src/main.c ****             if (sequence_step >= 3) GPIOA->BSRR = (1 << 6); 
 239              		.loc 1 32 49 is_stmt 0 discriminator 1 view .LVU70
 240 00b0 2022     		movs	r2, #32
 241 00b2 1A61     		str	r2, [r3, #16]
 242              	.L7:
  33:Core/Src/main.c ****             if (sequence_step >= 4) GPIOA->BSRR = (1 << 7);
 243              		.loc 1 33 13 is_stmt 1 view .LVU71
  33:Core/Src/main.c ****             if (sequence_step >= 4) GPIOA->BSRR = (1 << 7);
 244              		.loc 1 33 16 is_stmt 0 view .LVU72
 245 00b4 022D     		cmp	r5, #2
 246 00b6 B7D9     		bls	.L8
  33:Core/Src/main.c ****             if (sequence_step >= 4) GPIOA->BSRR = (1 << 7);
 247              		.loc 1 33 37 is_stmt 1 discriminator 1 view .LVU73
  33:Core/Src/main.c ****             if (sequence_step >= 4) GPIOA->BSRR = (1 << 7);
 248              		.loc 1 33 49 is_stmt 0 discriminator 1 view .LVU74
ARM GAS  C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s 			page 7


 249 00b8 084B     		ldr	r3, .L16
 250 00ba 4022     		movs	r2, #64
 251 00bc 1A61     		str	r2, [r3, #16]
  34:Core/Src/main.c ****             
 252              		.loc 1 34 13 is_stmt 1 view .LVU75
  34:Core/Src/main.c ****             
 253              		.loc 1 34 16 is_stmt 0 view .LVU76
 254 00be 032D     		cmp	r5, #3
 255 00c0 B2D9     		bls	.L8
  34:Core/Src/main.c ****             
 256              		.loc 1 34 37 is_stmt 1 discriminator 1 view .LVU77
  34:Core/Src/main.c ****             
 257              		.loc 1 34 49 is_stmt 0 discriminator 1 view .LVU78
 258 00c2 8022     		movs	r2, #128
 259 00c4 1A61     		str	r2, [r3, #16]
 260 00c6 AFE7     		b	.L8
 261              	.L15:
  37:Core/Src/main.c ****             }
 262              		.loc 1 37 17 is_stmt 1 view .LVU79
  37:Core/Src/main.c ****             }
 263              		.loc 1 37 29 is_stmt 0 view .LVU80
 264 00c8 064B     		ldr	r3, .L16+8
 265 00ca 4FF08042 		mov	r2, #1073741824
 266 00ce 1A61     		str	r2, [r3, #16]
 267 00d0 ACE7     		b	.L9
 268              	.LVL16:
 269              	.L11:
  50:Core/Src/main.c ****             }
 270              		.loc 1 50 17 is_stmt 1 view .LVU81
  50:Core/Src/main.c ****             }
 271              		.loc 1 50 29 is_stmt 0 view .LVU82
 272 00d2 044B     		ldr	r3, .L16+8
 273 00d4 4FF48042 		mov	r2, #16384
 274 00d8 1A61     		str	r2, [r3, #16]
 275 00da B4E7     		b	.L12
 276              	.L17:
 277              		.align	2
 278              	.L16:
 279 00dc 00080140 		.word	1073809408
 280 00e0 400D0300 		.word	200000
 281 00e4 00100140 		.word	1073811456
 282 00e8 67666666 		.word	1717986919
 283              	.LBE5:
 284              		.cfi_endproc
 285              	.LFE1:
 287              		.text
 288              	.Letext0:
 289              		.file 2 "D:/Programs/Education/STM32/Tools/Xpack/arm-none-eabi/include/machine/_default_types.h"
 290              		.file 3 "D:/Programs/Education/STM32/Tools/Xpack/arm-none-eabi/include/sys/_stdint.h"
 291              		.file 4 "Core/Inc/init.h"
ARM GAS  C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s:19     .text.delay:00000000 $t
C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s:25     .text.delay:00000000 delay
C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s:66     .text.main:00000000 $t
C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s:72     .text.main:00000000 main
C:\Users\Dmitriy\AppData\Local\Temp\ccoImzO0.s:279    .text.main:000000dc $d

UNDEFINED SYMBOLS
Init_RCC
Init_GPIO
